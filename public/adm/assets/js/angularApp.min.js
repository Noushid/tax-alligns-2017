var app=angular.module("myApp",["ngRoute","ui.bootstrap","angularUtils.directives.dirPagination","ngFileUpload"]);app.config(["$routeProvider","$locationProvider",function(e,t){t.hashPrefix(""),e.when("/",{}).when("/dashboard",{templateUrl:"dashboard",controller:"dashboardController"}).when("/testimonial",{templateUrl:"testimonial",controller:"testimonialController"}).when("/blog",{templateUrl:"blog",controller:"blogController"}).when("/document",{templateUrl:"document",controller:"documentController"}).when("/user-profile",{templateUrl:"change"})}]),app.filter("startFrom",function(){return function(e,t){return t=+t,e.slice(t)}}),app.directive("ngConfirmClick",[function(){return{link:function(e,t,n){var o=n.ngConfirmClick||"Are you sure?",a=n.confirmedClick;t.bind("click",function(t){window.confirm(o)&&e.$eval(a)})}}}]),app.controller("adminController",["$scope","$location","$http","$rootScope","$filter","$window","uibDateParser","$uibModal","$log","$document",function(e,t,n,o,a,i,l,r,s,d){function u(){var t=o.base_url+"admin/user";n.get(t).then(function(t){t.data&&(e.curuser=t.data.username,e.newuser.username=e.curuser)})}function c(t,n,o){var a=o?angular.element(d[0].querySelector(".modal-demo "+o)):void 0;r.open({animation:e.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:n,appendTo:a,resolve:{items:function(){return t}}}).result.then(function(t){e.selected=t},function(){s.info("Modal dismissed at: "+new Date)})}e.error={};var m=e.baseUrl=t.protocol()+"://"+location.host+"/";o.base_url=m,o.public_url=e.baseUrl=t.protocol()+"://"+location.host,e.paginations=[5,10,20,25],e.numPerPage=10,e.user={},e.curuser={},e.newuser={},e.newuser={},o.loading=!1,e.formdisable=!1,o.loading=!1,e.format="yyyy/MM/dd",e.login=function(){console.log("login");var t=new FormData;angular.forEach(e.user,function(e,n){t.append(n,e)});var a=o.base_url+"login/verify";n.post(a,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(e){i.location.href=m+"admin/#/"},function(t){console.log("login error"),console.log(t.data),e.error=t.data,e.showerror=!0})},e.changeProfile=function(){o.loading=!0;var t=new FormData;angular.forEach(e.newuser,function(e,n){t.append(n,e)});var a=o.base_url+"admin/change/submit";n.post(a,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(t){o.loading=!1,console.log("profile changed"),e.showmsg=!0,e.formdisable=!0,c("Username and Password changed.","sm"),e.newuser={},u(),e.newuser.username=e.curuser,e.formdisable=!1},function(t){o.loading=!1,e.showerror=!0,c("Try again later.","sm"),e.newuser={},u(),e.newuser.username=e.curuser,e.formdisable=!1})},e.cancel=function(){i.location.href="/#"},e.today=function(){e.date=new Date},e.today(),e.clear=function(){e.date=null},e.inlineOptions={customClass:function(t){var n=t.date;if("day"===t.mode)for(var o=new Date(n).setHours(0,0,0,0),a=0;a<e.events.length;a++)if(o===new Date(e.events[a].date).setHours(0,0,0,0))return e.events[a].status;return""},minDate:new Date,showWeeks:!0},e.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},e.toggleMin=function(){e.inlineOptions.minDate=e.inlineOptions.minDate?null:new Date,e.dateOptions.minDate=e.inlineOptions.minDate},e.toggleMin(),e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0},e.setDate=function(t,n,o){e.date=new Date(t,n,o)},e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],e.format=e.formats[0],e.altInputFormats=["M!/d!/yyyy"],e.popup1={opened:!1},e.popup2={opened:!1};var f=new Date;f.setDate(f.getDate()+1);var p=new Date;p.setDate(f.getDate()+1),e.events=[{date:f,status:"full"},{date:p,status:"partially"}]}]),app.controller("testimonialController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,t,n,o,a,i,l,r,s,d){function u(){t.get(n.base_url+"admin/testimonial/get").then(function(t){console.log(t.data),t.data?(e.testimonials=t.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.testimonials=[],e.newtestimonial={},e.curtestimonial={},e.files=[],e.errFiles=[],e.showform=!1,e.message={},n.url=o.path().replace("/",""),e.uploaded=[],e.fileValidation={},u(),e.newTestimonial=function(){e.newtestimonial={},e.filespre=[],e.uploaded=[],e.files=[],e.errFiles=[],e.showform=!0,e.item_files=!1},e.editTestimonial=function(t){console.log(t),e.showform=!0,e.curtestimonial=t,e.newtestimonial=angular.copy(t),e.item_files=t.file,e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addTestimonial=function(){n.loading=!0;var o=new FormData;if(angular.forEach(e.newtestimonial,function(e,t){o.append(t,e)}),o.append("uploaded",JSON.stringify(e.uploaded)),e.newtestimonial.id){a=n.base_url+"admin/testimonial/edit/"+e.newtestimonial.id;t.post(a,o,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(t){u(),e.newtestimonial={},e.showform=!1,n.loading=!1,e.files=""},function(t){console.log("edit Error :- Status :"+t.status+"data : "+t.data),n.loading=!1,e.files=""})}else{var a=n.base_url+"admin/testimonial/add";t.post(a,o,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(t){u(),e.newtestimonial={},e.showform=!1,n.loading=!1,e.files=""},function(t){console.log("addError :- Status :"+t.status+"data : "+t.data),console.log(t.data),n.loading=!1,e.files="",403==t.status&&(e.fileValidation.status=!0,e.fileValidation.msg=t.data.validation_error)})}},e.deleteTestimonial=function(o){n.loading=!0;var a=n.base_url+"admin/testimonial/delete/"+o.id;t.delete(a).then(function(t){var a=e.testimonials.indexOf(o);e.testimonials.splice(a,1),alert(t.data.msg),u(),n.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),n.loading=!1})},e.uploadFiles=function(t,o){angular.forEach(o,function(t){e.errFiles.push(t)}),angular.forEach(t,function(t){e.files.push(t),t.upload=a.upload({url:n.base_url+"admin/testimonial/upload",data:{file:t}}),t.upload.then(function(n){i(function(){e.uploaded.push(n.data),t.result=n.data})},function(t){t.status>0&&(e.errorMsg=t.status+": "+t.data)},function(e){t.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(o){n.loading=!0;var a=n.base_url+"admin/testimonial/delete-image/"+o.id;t.delete(a).then(function(t){console.log("image deleted"),e.item_files="",n.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),n.loading=!1})},e.showTestimonialFiles=function(t){console.log(t),e.testimonialfiles=t},e.animationsEnabled=!0,e.open=function(t,n,o){var a=o?angular.element(d[0].querySelector(".modal-demo "+o)):void 0;r.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:n,appendTo:a,resolve:{items:function(){return t}}}).result.then(function(t){e.selected=t},function(){s.info("Modal dismissed at: "+new Date)})}}]);
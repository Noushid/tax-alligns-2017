var app=angular.module("myApp",["ngRoute","ui.bootstrap","angularUtils.directives.dirPagination","ngFileUpload","ngCkeditor","yaru22.angular-timeago"]);app.config(["$routeProvider","$locationProvider","timeAgoSettings",function(e,a,o){o.allowFuture=!0,a.hashPrefix(""),e.when("/",{}).when("/dashboard",{templateUrl:"dashboard",controller:"dashboardController"}).when("/testimonial",{templateUrl:"testimonial",controller:"testimonialController"}).when("/blog",{templateUrl:"blog",controller:"blogController"}).when("/documents",{templateUrl:"document",controller:"documentController"}).when("/users",{templateUrl:"user",controller:"userController"}).when("/messages",{templateUrl:"messages",controller:"messageController"}).when("/doc-template",{templateUrl:"doc-template",controller:"DocTemplateController"}).when("/user-profile",{templateUrl:"edit-profile"})}]),app.filter("startFrom",function(){return function(e,a){return a=+a,e.slice(a)}}),app.directive("ngConfirmClick",[function(){return{link:function(e,a,o){var t=o.ngConfirmClick||"Are you sure?",n=o.confirmedClick;a.bind("click",function(a){window.confirm(t)&&e.$eval(n)})}}}]),app.controller("DocTemplateController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,a,o,t,n,l,s,i,r,d){function u(){a.get(o.base_url+"dashboard/doc-template/get").then(function(a){console.log(a.data),a.data?(e.templates=a.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.templates=[],e.newtemplate={},e.template={},e.files=[],e.errFiles=[],e.showform=!1,e.message={},o.url=t.path().replace("/",""),e.uploaded=[],e.fileValidation={},u(),e.newDocTemplate=function(){e.template={},e.filespre=[],e.uploaded=[],e.files=[],e.errFiles=[],e.showform=!0,e.item_files=!1},e.editDocTemplate=function(a){console.log(a),e.showform=!0,e.template=a,e.template=angular.copy(a),e.item_files=a.file,e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addDocTemplate=function(){o.loading=!0;var t=new FormData;if(angular.forEach(e.newtemplate,function(e,a){t.append(a,e)}),t.append("uploaded",JSON.stringify(e.uploaded)),e.newtemplate.id){n=o.base_url+"dashboard/doc-template/edit/"+e.newtemplate.id;a.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){u(),e.newtemplate={},e.showform=!1,o.loading=!1,e.files=""},function(a){console.log("edit Error :- Status :"+a.status+"data : "+a.data),o.loading=!1,e.files=""})}else{var n=o.base_url+"dashboard/doc-template/add";a.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){u(),e.newtemplate={},e.showform=!1,o.loading=!1,e.files=""},function(a){console.log("addError :- Status :"+a.status+"data : "+a.data),console.log(a.data),o.loading=!1,e.files="",403==a.status&&(e.fileValidation.status=!0,e.fileValidation.msg=a.data.validation_error)})}},e.deleteDocTemplate=function(t){o.loading=!0;var n=o.base_url+"dashboard/doc-template/delete/"+t.id;a.delete(n).then(function(a){var n=e.templates.indexOf(t);e.templates.splice(n,1),alert(a.data.msg),u(),o.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.uploadFiles=function(a,t){angular.forEach(t,function(a){e.errFiles.push(a)}),angular.forEach(a,function(a){e.files.push(a),a.upload=n.upload({url:o.base_url+"dashboard/doc-template/upload",data:{file:a}}),a.upload.then(function(o){l(function(){e.uploaded=o.data,a.result=o.data})},function(a){a.status>0&&(e.errorMsg=a.status+": "+a.data)},function(e){a.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(t){o.loading=!0;var n=o.base_url+"dashboard/doc-template/delete-image/"+t.id;a.delete(n).then(function(a){console.log("image deleted"),e.item_files="",o.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.showDocTemplateFiles=function(a){console.log(a),e.templatefiles=a},e.enableDocTemplate=function(e){o.loading=!0;var t=o.base_url+"dashboard/doc-template/enable/"+e.id;a.put(t).then(function(e){u(),o.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),u(),o.loading=!1})},e.disableDocTemplate=function(e){o.loading=!0;var t=o.base_url+"dashboard/doc-template/disable/"+e.id;a.put(t).then(function(e){u(),o.loading=!1},function(e){u(),console.log("Delete Error :- Status :"+e.status+"data : "+e.data),o.loading=!1})}}]),app.controller("adminController",["$scope","$location","$http","$rootScope","$filter","$window","uibDateParser","$uibModal","$log","$document",function(e,a,o,t,n,l,s,i,r,d){function u(){var a=t.base_url+"dashboard/user";o.get(a).then(function(a){a.data&&(e.curuser=a.data.username,e.newuser.username=e.curuser)})}function c(a,o,t){var n=t?angular.element(d[0].querySelector(".modal-demo "+t)):void 0;i.open({animation:e.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:o,appendTo:n,resolve:{items:function(){return a}}}).result.then(function(a){e.selected=a},function(){r.info("Modal dismissed at: "+new Date)})}e.error={};var f=e.baseUrl=a.protocol()+"://"+location.host+"/";t.base_url=f,t.public_url=e.baseUrl=a.protocol()+"://"+location.host,e.paginations=[5,10,20,25],e.numPerPage=10,e.user={},e.curuser={},e.newuser={},e.newuser={},t.loading=!1,e.formdisable=!1,t.loading=!1,e.format="yyyy/MM/dd",e.validationError={},e.options={language:"en",allowedContent:!0,entities:!1},e.onReady=function(){console.log("test")},e.login=function(){console.log("login");var a=new FormData;angular.forEach(e.user,function(e,o){a.append(o,e)});var n=t.base_url+"login/verify";o.post(n,a,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(e){l.location.href=f+"dashboard/#/"},function(a){console.log("login error"),console.log(a.data),e.error=a.data,e.showerror=!0})},e.changeProfile=function(){t.loading=!0;var a=new FormData,n=angular.element(document.getElementsByName("userid")[0]).val();angular.forEach(e.newuser,function(e,o){a.append(o,e)});var l=t.base_url+"dashboard/edit-profile/submit/"+n;o.post(l,a,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){t.loading=!1,console.log("profile changed"),e.showmsg=!0,e.formdisable=!0,c("Updated.","sm"),e.newuser={},u(),e.newuser.username=e.curuser,e.formdisable=!1,e.validationError={}},function(a){t.loading=!1,e.showerror=!0,console.log(a),0==a.data.cur_password?e.validationError.curPassword=!0:(c("Try again later.","sm"),e.newuser={},e.newuser.username=e.curuser,u()),e.formdisable=!1})},e.cancel=function(){l.location.href="/#"},e.today=function(){e.date=new Date},e.today(),e.clear=function(){e.date=null},e.inlineOptions={customClass:function(a){var o=a.date;if("day"===a.mode)for(var t=new Date(o).setHours(0,0,0,0),n=0;n<e.events.length;n++)if(t===new Date(e.events[n].date).setHours(0,0,0,0))return e.events[n].status;return""},minDate:new Date,showWeeks:!0},e.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},e.toggleMin=function(){e.inlineOptions.minDate=e.inlineOptions.minDate?null:new Date,e.dateOptions.minDate=e.inlineOptions.minDate},e.toggleMin(),e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0},e.setDate=function(a,o,t){e.date=new Date(a,o,t)},e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],e.format=e.formats[0],e.altInputFormats=["M!/d!/yyyy"],e.popup1={opened:!1},e.popup2={opened:!1};var g=new Date;g.setDate(g.getDate()+1);var m=new Date;m.setDate(g.getDate()+1),e.events=[{date:g,status:"full"},{date:m,status:"partially"}]}]),app.controller("blogController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,a,o,t,n,l,s,i,r,d){function u(){a.get(o.base_url+"dashboard/blog/get").then(function(a){console.log(a.data),a.data?(e.blogs=a.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.blogs=[],e.newblog={},e.curblog={},e.files=[],e.files1=[],e.errFiles=[],e.showform=!1,e.message={},o.url=t.path().replace("/",""),e.uploaded=[],e.uploaded1=[],e.fileValidation={},u(),e.newBlog=function(){e.newblog={},e.files=[],e.errFiles=[],e.showform=!0,e.item_files=!1},e.editBlog=function(a){e.showform=!0,e.curblog=a,e.newblog=angular.copy(a),e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addBlog=function(){o.loading=!0,e.newblog.date=s("date")(e.date,"yyyy-MM-dd");var t=new FormData;if(angular.forEach(e.newblog,function(e,a){t.append(a,e)}),e.newblog.id){n=o.base_url+"dashboard/blog/edit/"+e.newblog.id;a.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){u(),e.newblog={},e.showform=!1,o.loading=!1,e.files=[]},function(a){console.log("edit Error :- Status :"+a.status+"data : "+a.data),o.loading=!1,e.files=[]})}else{var n=o.base_url+"dashboard/blog/add";a.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){u(),e.newblog={},e.showform=!1,o.loading=!1,e.files=[]},function(a){console.log("addError :- Status :"+a.status+"data : "+a.data),console.log(a.data),o.loading=!1,e.files=[],403==a.status&&(e.fileValidation.status=!0,e.fileValidation.msg=a.data.validation_error)})}},e.deleteBlog=function(t){o.loading=!0;var n=o.base_url+"dashboard/blog/delete/"+t.id;a.delete(n).then(function(a){var n=e.blogs.indexOf(t);e.blogs.splice(n,1),alert(a.data.msg),u(),o.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.uploadFiles=function(a,t){angular.forEach(t,function(a){e.errFiles.push(a)}),angular.forEach(a,function(a){e.files.push(a),a.upload=n.upload({url:o.base_url+"dashboard/blog/upload",data:{file:a}}),a.upload.then(function(a){l(function(){e.uploaded.push(a.data),console.log(e.uploaded)})},function(a){a.status>0&&(e.errorMsg=a.status+": "+a.data)},function(e){a.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.cancelUpload=function(){n.upload.abort()},e.deleteImage=function(t){e.newblog.date=s("date")(e.date,"yyyy-MM-dd");var n=new FormData;e.newblog.image_url="",angular.forEach(e.newblog,function(e,a){n.append(a,e)}),o.loading=!0;var l=o.base_url+"dashboard/blog/edit/"+t.id;a.post(l,n,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(e){console.log("image deleted")},function(e){console.log("edit Error :- Status :"+e.status+"data : "+e.data)})},e.showBlogFiles=function(a){console.log(a),e.blogfiles=a},e.animationsEnabled=!0,e.open=function(a,o,t){var n=t?angular.element(d[0].querySelector(".modal-demo "+t)):void 0;i.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:o,appendTo:n,resolve:{items:function(){return a}}}).result.then(function(a){e.selected=a},function(){r.info("Modal dismissed at: "+new Date)})}}]),app.controller("documentController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,a,o,t,n,l,s,i,r,d){function u(){a.get(o.base_url+"dashboard/document/get").then(function(a){console.log(a.data),a.data?(e.documents=a.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.documents=[],e.newdocument={},e.curdocument={},e.files=[],e.errFiles=[],e.showform=!1,e.message={},o.url=t.path().replace("/",""),e.uploaded=[],e.fileValidation={},u(),e.newDocument=function(){e.newdocument={},e.filespre=[],e.uploaded=[],e.files=[],e.errFiles=[],e.showform=!0,e.item_files=!1},e.editDocument=function(a){console.log(a),e.showform=!0,e.curdocument=a,e.newdocument=angular.copy(a),e.item_files=a.file,e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addDocument=function(){o.loading=!0;var t=new FormData;if(angular.forEach(e.newdocument,function(e,a){t.append(a,e)}),t.append("uploaded",JSON.stringify(e.uploaded)),e.newdocument.id){n=o.base_url+"dashboard/document/edit/"+e.newdocument.id;a.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){u(),e.newdocument={},e.showform=!1,o.loading=!1,e.files=""},function(a){console.log("edit Error :- Status :"+a.status+"data : "+a.data),o.loading=!1,e.files=""})}else{var n=o.base_url+"dashboard/document/add";a.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){u(),e.newdocument={},e.showform=!1,o.loading=!1,e.files=""},function(a){console.log("addError :- Status :"+a.status+"data : "+a.data),console.log(a.data),o.loading=!1,e.files="",403==a.status&&(e.fileValidation.status=!0,e.fileValidation.msg=a.data.validation_error)})}},e.deleteDocument=function(t){o.loading=!0;var n=o.base_url+"dashboard/document/delete/"+t.id;a.delete(n).then(function(a){var n=e.documents.indexOf(t);e.documents.splice(n,1),alert(a.data.msg),u(),o.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.uploadFiles=function(a,t){angular.forEach(t,function(a){e.errFiles.push(a)}),angular.forEach(a,function(a){e.files.push(a),a.upload=n.upload({url:o.base_url+"dashboard/document/upload",data:{file:a}}),a.upload.then(function(o){l(function(){e.uploaded.push(o.data),a.result=o.data})},function(a){a.status>0&&(e.errorMsg=a.status+": "+a.data)},function(e){a.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(t){o.loading=!0;var n=o.base_url+"dashboard/document/delete-image/"+t.id;a.delete(n).then(function(a){console.log("image deleted"),e.item_files="",o.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.showDocumentFiles=function(a){console.log(a),e.documentfiles=a},e.animationsEnabled=!0,e.open=function(a,o,t){var n=t?angular.element(d[0].querySelector(".modal-demo "+t)):void 0;i.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:o,appendTo:n,resolve:{items:function(){return a}}}).result.then(function(a){e.selected=a},function(){r.info("Modal dismissed at: "+new Date)})}}]),app.controller("messageController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,a,o,t,n,l,s,i,r,d){function u(){a.get(o.base_url+"dashboard/user/get").then(function(a){a.data&&(e.users=a.data)})}e.messages=[],e.newmessage={},e.files=[],e.errFiles=[],e.message={},o.url=t.path().replace("/",""),e.uploaded=[],e.fileValidation={},e.successMessage=!1,e.errorMessage=!1,e.sentItem=[],e.receivedMessages=[],e.user={},e.showMessages=!1,e.receivedPerPage=5,e.sendPerPage=5,u(),e.newMessage=function(){e.newmessage={},e.filespre=[],e.uploaded=[],e.files=[],e.errFiles=[]},e.sendMessage=function(t){o.loading=!0;var n=new FormData;angular.forEach(e.newmessage,function(e,a){n.append(a,e)}),n.append("uploaded",JSON.stringify(e.uploaded));var s=o.base_url+"dashboard/message/send/"+t;a.post(s,n,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){e.newmessage={},o.loading=!1,e.files=[],e.successMessage=!0,l(function(){e.successMessage=!1},5e3)},function(a){o.loading=!1,e.files=[],e.errorMessage=!0,l(function(){e.errorMessage=!1},5e3)})},e.deleteMessage=function(t){o.loading=!0;var n=o.base_url+"dashboard/message/delete/"+t.id;a.delete(n).then(function(a){var n=e.messages.indexOf(t);e.messages.splice(n,1),o.loading=!1},function(e){o.loading=!1})},e.uploadFiles=function(a,t){angular.forEach(t,function(a){e.errFiles.push(a)}),angular.forEach(a,function(a){e.files.push(a),a.upload=n.upload({url:o.base_url+"dashboard/message/upload",data:{file:a}}),a.upload.then(function(o){l(function(){e.uploaded.push(o.data),a.result=o.data})},function(a){a.status>0&&(e.errorMsg=a.status+": "+a.data)},function(e){a.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(t){o.loading=!0;var n=o.base_url+"dashboard/message/delete-image/"+t.id;a.delete(n).then(function(a){e.item_files="",o.loading=!1},function(e){o.loading=!1})},e.showMessageFiles=function(a){e.messagefiles=a},e.animationsEnabled=!0,e.open=function(a,o,t){var n=t?angular.element(d[0].querySelector(".modal-demo "+t)):void 0;i.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:o,appendTo:n,resolve:{items:function(){return a}}}).result.then(function(a){e.selected=a},function(){r.info("Modal dismissed at: "+new Date)})},e.getMessages=function(a){e.user=a,e.loadInbox(a.id),e.loadSentItem(a.id),e.showMessages=!0},e.loadSentItem=function(t){o.loading=!0,a.get(o.base_url+"dashboard/message/sent-item/"+t).then(function(a){a.data?(e.sentItem=a.data,angular.forEach(e.sentItem,function(e,a){e.dateago=new Date(1e3*e.datetime).toISOString()}),o.loading=!1):(e.message="No data found",o.loading=!1)})},e.loadInbox=function(t){o.loading=!0,a.get(o.base_url+"dashboard/message/inbox/"+t).then(function(a){a.data?(e.receivedMessages=a.data,angular.forEach(e.receivedMessages,function(e,a){e.dateago=new Date(1e3*e.datetime).toISOString()}),o.loading=!1):(e.message="No data found",o.loading=!1)})},e.delivered=function(t){var n=o.base_url+"dashboard/message/delivered/"+t.id;a.put(n).then(function(a){var o=e.receivedMessages.indexOf(t);e.receivedMessages[o].received=1,u()},function(e){})},e.refreshMessage=function(a){u(),e.loadInbox(a.id),e.loadSentItem(a.id)}}]),app.controller("ModalInstanceCtrl",function(e,a,o){o.items=a,console.log(o.items),o.ok=function(){e.close(o.items)},o.cancel=function(){e.dismiss("cancel")}}),app.controller("testimonialController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,a,o,t,n,l,s,i,r,d){function u(){a.get(o.base_url+"dashboard/testimonial/get").then(function(a){console.log(a.data),a.data?(e.testimonials=a.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.testimonials=[],e.newtestimonial={},e.curtestimonial={},e.files=[],e.errFiles=[],e.showform=!1,e.message={},o.url=t.path().replace("/",""),e.uploaded=[],e.fileValidation={},u(),e.newTestimonial=function(){e.newtestimonial={},e.filespre=[],e.uploaded=[],e.files=[],e.errFiles=[],e.showform=!0,e.item_files=!1},e.editTestimonial=function(a){console.log(a),e.showform=!0,e.curtestimonial=a,e.newtestimonial=angular.copy(a),e.item_files=a.file,e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addTestimonial=function(){o.loading=!0;var t=new FormData;if(angular.forEach(e.newtestimonial,function(e,a){t.append(a,e)}),t.append("uploaded",JSON.stringify(e.uploaded)),e.newtestimonial.id){n=o.base_url+"dashboard/testimonial/edit/"+e.newtestimonial.id;a.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){u(),e.newtestimonial={},e.showform=!1,o.loading=!1,e.files=""},function(a){console.log("edit Error :- Status :"+a.status+"data : "+a.data),o.loading=!1,e.files=""})}else{var n=o.base_url+"dashboard/testimonial/add";a.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){u(),e.newtestimonial={},e.showform=!1,o.loading=!1,e.files=""},function(a){console.log("addError :- Status :"+a.status+"data : "+a.data),console.log(a.data),o.loading=!1,e.files="",403==a.status&&(e.fileValidation.status=!0,e.fileValidation.msg=a.data.validation_error)})}},e.deleteTestimonial=function(t){o.loading=!0;var n=o.base_url+"dashboard/testimonial/delete/"+t.id;a.delete(n).then(function(a){var n=e.testimonials.indexOf(t);e.testimonials.splice(n,1),alert(a.data.msg),u(),o.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.uploadFiles=function(a,t){angular.forEach(t,function(a){e.errFiles.push(a)}),angular.forEach(a,function(a){e.files.push(a),a.upload=n.upload({url:o.base_url+"dashboard/testimonial/upload",data:{file:a}}),a.upload.then(function(o){l(function(){e.uploaded.push(o.data),a.result=o.data})},function(a){a.status>0&&(e.errorMsg=a.status+": "+a.data)},function(e){a.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(t){o.loading=!0;var n=o.base_url+"dashboard/testimonial/delete-image/"+t.id;a.delete(n).then(function(a){console.log("image deleted"),e.item_files="",o.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.showTestimonialFiles=function(a){console.log(a),e.testimonialfiles=a},e.animationsEnabled=!0,e.open=function(a,o,t){var n=t?angular.element(d[0].querySelector(".modal-demo "+t)):void 0;i.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:o,appendTo:n,resolve:{items:function(){return a}}}).result.then(function(a){e.selected=a},function(){r.info("Modal dismissed at: "+new Date)})}}]),app.controller("userController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,a,o,t,n,l,s,i,r,d){function u(){a.get(o.base_url+"dashboard/user/get-all").then(function(a){console.log(a.data),a.data?(e.users=a.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.users=[],e.newuser={},e.curuser={},e.files=[],e.errFiles=[],e.showform=!1,e.message={},o.url=t.path().replace("/",""),e.uploaded=[],e.fileValidation={},e.mailData={},e.error={},e.validationError={},e.btnDisabled=!1,u(),e.newUser=function(){e.newuser={},e.filespre=[],e.uploaded=[],e.files=[],e.errFiles=[],e.showform=!0,e.item_files=!1,e.error.mail=!1,e.validationError={}},e.editUser=function(a){console.log(a),e.showform=!0,e.curuser=a,e.newuser=angular.copy(a),e.item_files=a.file,e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addUser=function(){o.loading=!0;var t=new FormData;if(angular.forEach(e.newuser,function(e,a){t.append(a,e)}),t.append("uploaded",JSON.stringify(e.uploaded)),e.newuser.id){n=o.base_url+"dashboard/user/edit/"+e.newuser.id;a.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){u(),e.newuser={},e.showform=!1,o.loading=!1,e.files=""},function(a){console.log("edit Error :- Status :"+a.status+"data : "+a.data),o.loading=!1,e.files=""})}else{var n=o.base_url+"dashboard/user/add";a.post(n,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){u(),e.newuser={},e.showform=!1,o.loading=!1,e.files=[]},function(a){console.log("addError :- Status :"+a.status+"data : "+a.data),console.log(a),o.loading=!1,"Mail server error"==a.statusText&&(e.error.mail=!0),"email exist"==a.statusText&&(console.log("email exist"),e.validationError.email=!0),o.showform=!1,e.files=[],400==a.status&&(e.newuser={})})}},e.deleteUser=function(t){o.loading=!0;var n=o.base_url+"dashboard/user/delete/"+t.id;a.delete(n).then(function(a){var n=e.users.indexOf(t);e.users.splice(n,1),o.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.uploadFiles=function(a,t){angular.forEach(t,function(a){e.errFiles.push(a)}),angular.forEach(a,function(a){e.files.push(a),a.upload=n.upload({url:o.base_url+"dashboard/user/upload",data:{file:a}}),a.upload.then(function(o){l(function(){e.uploaded.push(o.data),a.result=o.data})},function(a){a.status>0&&(e.errorMsg=a.status+": "+a.data)},function(e){a.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(t){o.loading=!0;var n=o.base_url+"dashboard/user/delete-image/"+t.id;a.delete(n).then(function(a){console.log("image deleted"),e.item_files="",o.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.showUserFiles=function(a){console.log(a),e.userfiles=a},e.animationsEnabled=!0,e.open=function(a,o,t){console.log("test");var n=t?angular.element(d[0].querySelector(".modal-demo "+t)):void 0;i.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"userModal.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:o,appendTo:n,resolve:{items:function(){return a}}}).result.then(function(a){e.selected=a},function(){r.info("Modal dismissed at: "+new Date)})},e.activateUser=function(e){o.loading=!0,a.post(o.base_url+"dashboard/user/activate/"+e.id,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(e){u(),o.loading=!1},function(e){console.log("addError :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.deActivateUser=function(e){o.loading=!0,a.post(o.base_url+"dashboard/user/de-activate/"+e.id,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(e){u(),o.loading=!1},function(e){console.log("addError :- Status :"+e.status+"data : "+e.data),console.log(e.data),o.loading=!1})},e.generatePassword=function(){e.newuser.password=Math.random().toString(36).slice(-8)},e.checkEmail=function(t){var n=new FormData;n.append("email",t);var l=o.base_url+"dashboard/user/check-email";a.post(l,n,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(a){e.validationError.email=!1,e.btnDisabled=!1},function(a){e.validationError.email=!0,e.btnDisabled=!0})}}]);
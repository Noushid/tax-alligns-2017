var app=angular.module("myApp",["ngRoute","ui.bootstrap","angularUtils.directives.dirPagination","ngFileUpload","ngCkeditor"]);app.config(["$routeProvider","$locationProvider",function(e,o){o.hashPrefix(""),e.when("/",{}).when("/dashboard",{templateUrl:"dashboard",controller:"dashboardController"}).when("/testimonial",{templateUrl:"testimonial",controller:"testimonialController"}).when("/blog",{templateUrl:"blog",controller:"blogController"}).when("/documents",{templateUrl:"document",controller:"documentController"}).when("/user-profile",{templateUrl:"change"})}]),app.filter("startFrom",function(){return function(e,o){return o=+o,e.slice(o)}}),app.directive("ngConfirmClick",[function(){return{link:function(e,o,t){var a=t.ngConfirmClick||"Are you sure?",n=t.confirmedClick;o.bind("click",function(o){window.confirm(a)&&e.$eval(n)})}}}]),app.controller("adminController",["$scope","$location","$http","$rootScope","$filter","$window","uibDateParser","$uibModal","$log","$document",function(e,o,t,a,n,l,i,s,r,d){function u(){var o=a.base_url+"admin/user";t.get(o).then(function(o){o.data&&(e.curuser=o.data.username,e.newuser.username=e.curuser)})}function c(o,t,a){var n=a?angular.element(d[0].querySelector(".modal-demo "+a)):void 0;s.open({animation:e.animationsEnabled,templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:t,appendTo:n,resolve:{items:function(){return o}}}).result.then(function(o){e.selected=o},function(){r.info("Modal dismissed at: "+new Date)})}e.error={};var f=e.baseUrl=o.protocol()+"://"+location.host+"/";a.base_url=f,a.public_url=e.baseUrl=o.protocol()+"://"+location.host,e.paginations=[5,10,20,25],e.numPerPage=10,e.user={},e.curuser={},e.newuser={},e.newuser={},a.loading=!1,e.formdisable=!1,a.loading=!1,e.format="yyyy/MM/dd",e.options={language:"en",allowedContent:!0,entities:!1},e.onReady=function(){console.log("test")},e.login=function(){console.log("login");var o=new FormData;angular.forEach(e.user,function(e,t){o.append(t,e)});var n=a.base_url+"login/verify";t.post(n,o,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(e){l.location.href=f+"admin/#/"},function(o){console.log("login error"),console.log(o.data),e.error=o.data,e.showerror=!0})},e.changeProfile=function(){a.loading=!0;var o=new FormData;angular.forEach(e.newuser,function(e,t){o.append(t,e)});var n=a.base_url+"admin/change/submit";t.post(n,o,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){a.loading=!1,console.log("profile changed"),e.showmsg=!0,e.formdisable=!0,c("Username and Password changed.","sm"),e.newuser={},u(),e.newuser.username=e.curuser,e.formdisable=!1},function(o){a.loading=!1,e.showerror=!0,c("Try again later.","sm"),e.newuser={},u(),e.newuser.username=e.curuser,e.formdisable=!1})},e.cancel=function(){l.location.href="/#"},e.today=function(){e.date=new Date},e.today(),e.clear=function(){e.date=null},e.inlineOptions={customClass:function(o){var t=o.date;if("day"===o.mode)for(var a=new Date(t).setHours(0,0,0,0),n=0;n<e.events.length;n++)if(a===new Date(e.events[n].date).setHours(0,0,0,0))return e.events[n].status;return""},minDate:new Date,showWeeks:!0},e.dateOptions={formatYear:"yy",maxDate:new Date(2020,5,22),minDate:new Date,startingDay:1},e.toggleMin=function(){e.inlineOptions.minDate=e.inlineOptions.minDate?null:new Date,e.dateOptions.minDate=e.inlineOptions.minDate},e.toggleMin(),e.open1=function(){e.popup1.opened=!0},e.open2=function(){e.popup2.opened=!0},e.setDate=function(o,t,a){e.date=new Date(o,t,a)},e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],e.format=e.formats[0],e.altInputFormats=["M!/d!/yyyy"],e.popup1={opened:!1},e.popup2={opened:!1};var m=new Date;m.setDate(m.getDate()+1);var g=new Date;g.setDate(m.getDate()+1),e.events=[{date:m,status:"full"},{date:g,status:"partially"}]}]),app.controller("blogController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,o,t,a,n,l,i,s,r,d){function u(){o.get(t.base_url+"dashboard/blog/get").then(function(o){console.log(o.data),o.data?(e.blogs=o.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.blogs=[],e.newblog={},e.curblog={},e.files=[],e.files1=[],e.errFiles=[],e.showform=!1,e.message={},t.url=a.path().replace("/",""),e.uploaded=[],e.uploaded1=[],e.fileValidation={},u(),e.newBlog=function(){e.newblog={},e.filespre=[],e.uploaded=[],e.uploaded1=[],e.files=[],e.files1=[],e.errFiles=[],e.showform=!0,e.item_files=!1},e.editBlog=function(o){console.log(o),e.showform=!0,e.curblog=o,e.newblog=angular.copy(o),e.item_files=o.file,e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addBlog=function(){t.loading=!0,e.newblog.date=i("date")(e.date,"yyyy-MM-dd");var a=new FormData;if(angular.forEach(e.newblog,function(e,o){a.append(o,e)}),a.append("uploaded",JSON.stringify(e.uploaded)),a.append("uploaded1",JSON.stringify(e.uploaded1)),e.newblog.id){n=t.base_url+"dashboard/blog/edit/"+e.newblog.id;o.post(n,a,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){u(),e.newblog={},e.showform=!1,t.loading=!1,e.files=""},function(o){console.log("edit Error :- Status :"+o.status+"data : "+o.data),t.loading=!1,e.files=""})}else{var n=t.base_url+"dashboard/blog/add";o.post(n,a,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){u(),e.newblog={},e.showform=!1,t.loading=!1,e.files=[]},function(o){console.log("addError :- Status :"+o.status+"data : "+o.data),console.log(o.data),t.loading=!1,e.files=[],403==o.status&&(e.fileValidation.status=!0,e.fileValidation.msg=o.data.validation_error)})}},e.deleteBlog=function(a){t.loading=!0;var n=t.base_url+"dashboard/blog/delete/"+a.id;o.delete(n).then(function(o){var n=e.blogs.indexOf(a);e.blogs.splice(n,1),alert(o.data.msg),u(),t.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),t.loading=!1})},e.uploadFiles=function(o,a){angular.forEach(a,function(o){e.errFiles.push(o)}),angular.forEach(o,function(o){e.files.push(o),o.upload=n.upload({url:t.base_url+"dashboard/blog/upload",data:{file:o}}),o.upload.then(function(t){l(function(){o.result=t.data,e.fileUrl=t.data.url})},function(o){o.status>0&&(e.errorMsg=o.status+": "+o.data)},function(e){o.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.uploadFiles1=function(o,a){angular.forEach(a,function(o){e.errFiles1.push(o)}),angular.forEach(o,function(o){e.files1.push(o),o.upload=n.upload({url:t.base_url+"dashboard/blog/upload",data:{file:o}}),o.upload.then(function(t){l(function(){e.uploaded1.push(t.data),o.result1=t.data})},function(o){o.status>0&&(e.errorMsg1=o.status+": "+o.data)},function(e){o.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(a){t.loading=!0;var n=t.base_url+"dashboard/blog/delete-image/"+a.id;o.delete(n).then(function(o){console.log("image deleted"),e.item_files="",t.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),t.loading=!1})},e.showBlogFiles=function(o){console.log(o),e.blogfiles=o},e.animationsEnabled=!0,e.open=function(o,t,a){var n=a?angular.element(d[0].querySelector(".modal-demo "+a)):void 0;s.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:t,appendTo:n,resolve:{items:function(){return o}}}).result.then(function(o){e.selected=o},function(){r.info("Modal dismissed at: "+new Date)})}}]),app.controller("documentController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,o,t,a,n,l,i,s,r,d){function u(){o.get(t.base_url+"admin/document/get").then(function(o){console.log(o.data),o.data?(e.documents=o.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.documents=[],e.newdocument={},e.curdocument={},e.files=[],e.errFiles=[],e.showform=!1,e.message={},t.url=a.path().replace("/",""),e.uploaded=[],e.fileValidation={},u(),e.newDocument=function(){e.newdocument={},e.filespre=[],e.uploaded=[],e.files=[],e.errFiles=[],e.showform=!0,e.item_files=!1},e.editDocument=function(o){console.log(o),e.showform=!0,e.curdocument=o,e.newdocument=angular.copy(o),e.item_files=o.file,e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addDocument=function(){t.loading=!0;var a=new FormData;if(angular.forEach(e.newdocument,function(e,o){a.append(o,e)}),a.append("uploaded",JSON.stringify(e.uploaded)),e.newdocument.id){n=t.base_url+"admin/document/edit/"+e.newdocument.id;o.post(n,a,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){u(),e.newdocument={},e.showform=!1,t.loading=!1,e.files=""},function(o){console.log("edit Error :- Status :"+o.status+"data : "+o.data),t.loading=!1,e.files=""})}else{var n=t.base_url+"admin/document/add";o.post(n,a,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){u(),e.newdocument={},e.showform=!1,t.loading=!1,e.files=""},function(o){console.log("addError :- Status :"+o.status+"data : "+o.data),console.log(o.data),t.loading=!1,e.files="",403==o.status&&(e.fileValidation.status=!0,e.fileValidation.msg=o.data.validation_error)})}},e.deleteDocument=function(a){t.loading=!0;var n=t.base_url+"admin/document/delete/"+a.id;o.delete(n).then(function(o){var n=e.documents.indexOf(a);e.documents.splice(n,1),alert(o.data.msg),u(),t.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),t.loading=!1})},e.uploadFiles=function(o,a){angular.forEach(a,function(o){e.errFiles.push(o)}),angular.forEach(o,function(o){e.files.push(o),o.upload=n.upload({url:t.base_url+"admin/document/upload",data:{file:o}}),o.upload.then(function(t){l(function(){e.uploaded.push(t.data),o.result=t.data})},function(o){o.status>0&&(e.errorMsg=o.status+": "+o.data)},function(e){o.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(a){t.loading=!0;var n=t.base_url+"admin/document/delete-image/"+a.id;o.delete(n).then(function(o){console.log("image deleted"),e.item_files="",t.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),t.loading=!1})},e.showDocumentFiles=function(o){console.log(o),e.documentfiles=o},e.animationsEnabled=!0,e.open=function(o,t,a){var n=a?angular.element(d[0].querySelector(".modal-demo "+a)):void 0;s.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:t,appendTo:n,resolve:{items:function(){return o}}}).result.then(function(o){e.selected=o},function(){r.info("Modal dismissed at: "+new Date)})}}]),app.controller("testimonialController",["$scope","$http","$rootScope","$location","Upload","$timeout","$filter","$uibModal","$log","$document",function(e,o,t,a,n,l,i,s,r,d){function u(){o.get(t.base_url+"admin/testimonial/get").then(function(o){console.log(o.data),o.data?(e.testimonials=o.data,e.showtable=!0):(console.log("No data Found"),e.showtable=!1,e.message="No data found")})}e.testimonials=[],e.newtestimonial={},e.curtestimonial={},e.files=[],e.errFiles=[],e.showform=!1,e.message={},t.url=a.path().replace("/",""),e.uploaded=[],e.fileValidation={},u(),e.newTestimonial=function(){e.newtestimonial={},e.filespre=[],e.uploaded=[],e.files=[],e.errFiles=[],e.showform=!0,e.item_files=!1},e.editTestimonial=function(o){console.log(o),e.showform=!0,e.curtestimonial=o,e.newtestimonial=angular.copy(o),e.item_files=o.file,e.files=[]},e.hideForm=function(){e.errFiles="",e.showform=!1},e.addTestimonial=function(){t.loading=!0;var a=new FormData;if(angular.forEach(e.newtestimonial,function(e,o){a.append(o,e)}),a.append("uploaded",JSON.stringify(e.uploaded)),e.newtestimonial.id){n=t.base_url+"admin/testimonial/edit/"+e.newtestimonial.id;o.post(n,a,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){u(),e.newtestimonial={},e.showform=!1,t.loading=!1,e.files=""},function(o){console.log("edit Error :- Status :"+o.status+"data : "+o.data),t.loading=!1,e.files=""})}else{var n=t.base_url+"admin/testimonial/add";o.post(n,a,{transformRequest:angular.identity,headers:{"Content-Type":void 0,"Process-Data":!1}}).then(function(o){u(),e.newtestimonial={},e.showform=!1,t.loading=!1,e.files=""},function(o){console.log("addError :- Status :"+o.status+"data : "+o.data),console.log(o.data),t.loading=!1,e.files="",403==o.status&&(e.fileValidation.status=!0,e.fileValidation.msg=o.data.validation_error)})}},e.deleteTestimonial=function(a){t.loading=!0;var n=t.base_url+"admin/testimonial/delete/"+a.id;o.delete(n).then(function(o){var n=e.testimonials.indexOf(a);e.testimonials.splice(n,1),alert(o.data.msg),u(),t.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),t.loading=!1})},e.uploadFiles=function(o,a){angular.forEach(a,function(o){e.errFiles.push(o)}),angular.forEach(o,function(o){e.files.push(o),o.upload=n.upload({url:t.base_url+"admin/testimonial/upload",data:{file:o}}),o.upload.then(function(t){l(function(){e.uploaded.push(t.data),o.result=t.data})},function(o){o.status>0&&(e.errorMsg=o.status+": "+o.data)},function(e){o.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})},e.deleteImage=function(a){t.loading=!0;var n=t.base_url+"admin/testimonial/delete-image/"+a.id;o.delete(n).then(function(o){console.log("image deleted"),e.item_files="",t.loading=!1},function(e){console.log("Delete Error :- Status :"+e.status+"data : "+e.data),console.log(e.data),t.loading=!1})},e.showTestimonialFiles=function(o){console.log(o),e.testimonialfiles=o},e.animationsEnabled=!0,e.open=function(o,t,a){var n=a?angular.element(d[0].querySelector(".modal-demo "+a)):void 0;s.open({animation:e.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",controllerAs:"$scope",size:t,appendTo:n,resolve:{items:function(){return o}}}).result.then(function(o){e.selected=o},function(){r.info("Modal dismissed at: "+new Date)})}}]);